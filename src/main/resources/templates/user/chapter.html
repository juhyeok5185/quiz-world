<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="/static/common/js/fetchUtils.js" type="text/javascript"></script>
</head>
<body>

<input type="text" id="name">
<button type="button" onclick="save();">저장</button>

<div class="listArea">

</div>

<script>
    window.onload = () => {
        findAllByChapterId();
    }

    async function save() {
        const subjectId = getParamValue('subjectId')
        const name = find('#name').value;
        const json = {name};
        const url = `/api/subjects/${subjectId}/chapters`;
        const response = await fetchPostByJson(url, json);
        location.reload();
    }

    async function findAllByChapterId() {
        const subjectId = getParamValue('subjectId')
        const url = `/api/subjects/${subjectId}/chapters`;
        const response = await fetchGet(url);
        drawList(response);
    }

    function drawList(response) {
        let html = ``;
        response.forEach(item => {
            html += `<div><a href="/user/question?chapterId=${item.chapterId}">${item.name}</a></div>`
        })
        find('.listArea').innerHTML = html;
    }


</script>
</body>
</html>